{{/* feature flags */}}
{{- $workmode := false -}}{{/* enable work configuration */}}
{{- $wsl := false -}}{{/* enable wsl specific features */}}
{{- "" -}}

{{- $langenv := "home" }}{{/* determine which programming languages (and versions) to sync with asdf */}}

{{- if eq .chezmoi.os "darwin" -}}
{{-   if contains "MacBookPro18,3" (output "sysctl" "-n" "hw.model" | trim) -}}
{{-     $workmode = true -}}
{{-     $langenv  = "work" -}}
{{-   end -}}
{{- end -}}

{{- if eq .chezmoi.os "linux" -}}
{{-   if (.chezmoi.kernel.osrelease | lower | contains "microsoft") -}}
{{-     $wsl = true -}}
{{-   end -}}
{{- end -}}

{{- if eq .chezmoi.os "darwin" -}}
{{-     $ssid = (output "/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport --getinfo | awk -F: '/ SSID: /{print $2}'" | trim) -}}
{{ - end -}}

[data]
    workmode = {{ $workmode }}
    langenv  = "{{ $langenv }}"
    wsl      = {{ $wsl }}
    ssid     = "{{ $ssid }}"

[onepassword]
    command = "{{ if $wsl }}~/.wslshims/op{{ else }}op{{ end }}"